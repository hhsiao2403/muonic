
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Fermilab DAQ - hardware documentation &mdash; muonic 1.0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/pyramid.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="muonic 1.0.1 documentation" href="index.html" />
    <link rel="next" title="muonic package software reference" href="muonic.html" />
    <link rel="prev" title="How to use muonic" href="tutorial.html" />
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Neuton&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Nobile:regular,italic,bold,bolditalic&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->

  </head>
  <body>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="muonic.html" title="muonic package software reference"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="tutorial.html" title="How to use muonic"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">muonic 1.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="fermilab-daq-hardware-documentation">
<h1>Fermilab DAQ - hardware documentation<a class="headerlink" href="#fermilab-daq-hardware-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="ascii-daq-output-format">
<h2>ASCII DAQ output format<a class="headerlink" href="#ascii-daq-output-format" title="Permalink to this headline">¶</a></h2>
<p>sample line of DAQ output - example for the daq data format</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="8%" />
<col width="10%" />
<col width="7%" />
<col width="12%" />
<col width="13%" />
<col width="4%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">triggers</th>
<th class="head">r0</th>
<th class="head">f0</th>
<th class="head">r1</th>
<th class="head">f1</th>
<th class="head">r2</th>
<th class="head">f2</th>
<th class="head">r3</th>
<th class="head">f3</th>
<th class="head">onepps</th>
<th class="head">gpstime</th>
<th class="head">gpsdte</th>
<th class="head">gps-valid</th>
<th class="head">gps-satelites</th>
<th class="head">xx</th>
<th class="head">correction</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>92328FE2</td>
<td>00</td>
<td>3D</td>
<td>00</td>
<td>3E</td>
<td>00</td>
<td>00</td>
<td>00</td>
<td>00</td>
<td>915E10CF</td>
<td>034016.021</td>
<td>060180</td>
<td>V</td>
<td>00</td>
<td>0</td>
<td>+0055</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="daq-onboard-documentation">
<h2>DAQ onboard documentation<a class="headerlink" href="#daq-onboard-documentation" title="Permalink to this headline">¶</a></h2>
<p>Online help on the DAQ cards is available by sending the following commands to the DAQ</p>
<ul class="simple">
<li>V1, V2, V3</li>
<li>H1,H2</li>
</ul>
<div class="section" id="v1">
<h3>V1<a class="headerlink" href="#v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Setting</th>
<th class="head">example value</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Run Mode</td>
<td>Off</td>
<td>CE (cnt enable), CD (cnt disable )</td>
</tr>
<tr class="row-odd"><td>Ch(s) Enabled</td>
<td>3,2,1,0</td>
<td>Cmd DC  Reg C0 using (bits 3-0)</td>
</tr>
<tr class="row-even"><td>Veto Enable</td>
<td>Off</td>
<td>VE 0 (Off),  VE 1 (On)</td>
</tr>
<tr class="row-odd"><td>Veto Select</td>
<td>Ch0</td>
<td>Cmd DC  Reg C0 using (bits 7,6)</td>
</tr>
<tr class="row-even"><td>Coincidence 1-4</td>
<td>1-Fold</td>
<td>Cmd DC  Reg C0 using (bits 5,4)</td>
</tr>
<tr class="row-odd"><td>Pipe Line Delay</td>
<td>40 nS</td>
<td>Cmd DT  Reg T1=rDelay  Reg T2=wDelay  10nS/cnt</td>
</tr>
<tr class="row-even"><td>Gate Width</td>
<td>100 nS</td>
<td>Cmd DC  Reg C2=LowByte Reg C3=HighByte 10nS/cnt</td>
</tr>
<tr class="row-odd"><td>Veto Width</td>
<td>0 nS</td>
<td>Cmd VG  (10nS/cnt)</td>
</tr>
<tr class="row-even"><td>Ch0 Threshold
Ch1 Threshold
Ch2 Threshold
Ch3 Threshold</td>
<td>0.200 vlts
0.200 vlts
0.200 vlts
0.200 vlts</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>Test Pulser Vlt
Test Pulse Ena</td>
<td>3.000 vlts
Off</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>Example line for 1 of 4 channels. (Line Drawing, Not to Scale)
Input Pulse edges (begin/end) set rising/falling tags bits.
____~~~~~~_________________________________ Input Pulse, Gate cycle begins
__________________~________________________ Delayed Rise Edge &#8216;RE&#8217; Tag Bit
________________________~__________________ Delayed Fall Edge &#8216;FE&#8217; Tag Bit
_____________                           Tag Bits delayed by PipeLnDly
___|        <a href="#id7"><span class="problematic" id="id8">|_________________________ PipeLineDelay :   40nS
_____________________
_________________|</span></a>                     <a href="#id9"><span class="problematic" id="id10">|___ Capture Window:   60nS
___________________________________
___|</span></a>                                   <a href="#id1"><span class="problematic" id="id2">|</span></a>___ Gate Width    :  100nS</p>
<p>If &#8216;RE&#8217;,&#8217;FE&#8217; are outside Capture Window, data tag bit(s) will be missing.
CaptureWindow = GateWidth - PipeLineDelay
The default Pipe Line Delay is 40nS, default Gate Width is 100nS.
Setup CMD sequence for Pipeline Delay.  CD,  WT 1 0, WT 2 nn (10nS/cnt)
Setup CMD sequence for Gate Width.  CD, WC 2 nn(10nS/cnt), WC 3 nn (2.56uS/cnt)</p>
<p>H2</p>
<p>Barometer      Qnet Help Page 2
BA      - Display Barometer trim setting in mVolts and pressure as mBar.
BA d    - Calibrate Barometer by adj. trim DAC ch in mVlts (0-4095mV).
Flash
FL p    - Load Flash with Altera binary file(<a href="#id3"><span class="problematic" id="id4">*</span></a>.rbf), p=password.
FR      - Read FPGA setup flash, display sumcheck.
FMR p   - Read page 0-3FF(h), (264 bytes/page)
Page 100h= start fpga <a href="#id5"><span class="problematic" id="id6">*</span></a>.rbf file, page 0=saved setup.
GPS
NA 0    - Append NMEA GPS data Off,(include 1pps data).
NA 1    - Append NMEA GPS data On, (Adds GPS to output).
NA 2    - Append NMEA GPS data Off,(no 1pps data).
NM 0    - NMEA GPS display, Off, (default), GPS port speed 38400, locked.
NM 1    - NMEA GPS display (RMC + GGA + GSV) data.
NM 2    - NMEA GPS display (ALL) data, use with GPS display applications.
Test Pulser
TE m    - Enable run mode,  0=Off, 1=One cycle, 2=Continuous.
TD m    - Load sample trigger data list, 0=Reset, 1=Singles, 2=Majority.
TV m    - Voltage level at pulse DAC, 0-4095mV, TV=read.
Serial #
SN p n  - Store serial # to flash, p=password, n=(0-65535 BCD).
SN      - Display serial number (BCD).
Status
ST      - Send status line now.  This resets the minute timer.
ST 0    - Status line, disabled.
ST 1 m  - Send status line every (m) minutes.(m=1-30, def=5).
ST 2 m  - Include scalar data line, chs S0-S4 after each status line.
ST 3 m  - Include scalar data line, plus reset counters on each timeout.
TI n     - Timer (day hr:min:sec.msec), TI=display time, (TI n=0 clear).
U1 n     - Display Uart error counter, (U1 n=0 to zero counters).
VM 1     - View mode, 0x80=Event_Demarcation_Bit outputs a blank line.
- View mode returns to normal after &#8216;CD&#8217;,&#8217;CE&#8217;,&#8217;ST&#8217; or &#8216;RE&#8217;.</p>
<p>H1
Quarknet Scintillator Card,  Qnet2.5  Vers 1.11  Compiled Jul 15 2009  HE=Help
Serial#=6531     uC_Volts=3.33      GPS_TempC=0.0     mBar=1023.8</p>
<p>CE     - TMC Counter Enable.
CD     - TMC Counter Disable.
DC     - Display Control Registers, (C0-C3).
WC a d - Write   Control Registers, addr(0-6) data byte(H).
DT     - Display TMC Reg, 0-3, (1=PipeLineDelayRd, 2=PipeLineDelayWr).
WT a d - Write   TMC Reg, addr(1,2) data byte(H), if a=4 write delay word.
DG     - Display GPS Info, Date, Time, Position and Status.
DS     - Display Scalar, channel(S0-S3), trigger(S4), time(S5).
RE     - Reset complete board to power up defaults.
RB     - Reset only the TMC and Counters.
SB p d - Set Baud,password, 1=19K, 2=38K, 3=57K ,4=115K, 5=230K, 6=460K, 7=920K
SA n   - Save setup, 0=(TMC disable), 1=(TMC enable), 2=(Restore Defaults).
TH     - Thermometer data display (&#64; GPS), -40 to 99 degrees C.
TL c d - Threshold Level, signal ch(0-3)(4=setAll), data(0-4095mV), TL=read.
Veto   - Veto select, Off=&#8217;VE 0&#8217;, On=&#8217;VE 1&#8217;, Gate=&#8217;VG c&#8217;, 0-255(D) 10ns/cnt.
View   - View setup registers. Setup=V1, Voltages(V2), GPS LOCK(V3).
HELP   - HE,H1=Page1, H2=Page2, HB=Barometer, HS=Status, HT=Trigger.</p>
<p>VE2
V2
Barometer Pressure Sensor
Calibration Voltage  = 1495 mVolts   Use Cmd &#8216;BA&#8217; to calibrate.
Sensor Output Voltage= 1655 mVolts   (2.93mV *  565 Cnts)
Pressure mBar        = 1023.6        (1655.5 - 1500)/15 + 1013.25
Pressure inch        = 30.63         (mBar / 33.42)</p>
<p>Timer Capture/Compare Channel
TempC  = 0.0     Error?  Check sensor cable connection at GPS unit.
TempF  = 32.0    (TempC * 1.8) + 32</p>
<p>Analog to Digital Converter Channels(ADC)
Vcc 1.80V = 1.82 vlts     (2.93mV *  621 Cnts)
Vcc 1.20V = 1.19 vlts     (2.93mV *  407 Cnts)
Pos 2.50V = 2.45 vlts     (2.93mV *  837 Cnts)
Neg 5.00V = 5.03 vlts     (7.38mV *  682 Cnts)
Vcc 3.30V = 3.33 vlts     (4.84mV *  689 Cnts)
Pos 5.00V = 4.84 vlts     (7.38mV *  656 Cnts)
5V Test    Max=4.86v    Min=4.84v    Noise=0.015v</p>
<p>V3
10 Second Accumulation of 1PPS Latched 25MHz Counter. (20 line buffer)
Buffer     Now (hex)     Prev-Now (dec) (25e6*10)
1              0               0
2              0               0
3              0               0
4              0               0
5              0               0
6              0               0
7              0               0
8              0               0
9              0               0
10              0               0
11              0               0
12              0               0
13              0               0
14              0               0
15              0               0
16              0               0
17              0               0
18              0               0
19              0               0
20              0               0</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Fermilab DAQ - hardware documentation</a><ul>
<li><a class="reference internal" href="#ascii-daq-output-format">ASCII DAQ output format</a></li>
<li><a class="reference internal" href="#daq-onboard-documentation">DAQ onboard documentation</a><ul>
<li><a class="reference internal" href="#v1">V1</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="tutorial.html"
                        title="previous chapter">How to use muonic</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="muonic.html"
                        title="next chapter">muonic package software reference</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="muonic.html" title="muonic package software reference"
             >next</a> |</li>
        <li class="right" >
          <a href="tutorial.html" title="How to use muonic"
             >previous</a> |</li>
        <li><a href="index.html">muonic 1.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, robert.franke,achim.stoessl.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>